webpackJsonp([6],{"+ILz":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("EuXz");var i=n("hAM4"),s=n.n(i),o=n("jgMU"),r=n.n(o),a=n("Hsq6"),l=n("iNQd"),c=n.n(l),h={name:"news-tool-bar",props:{liked:{type:Boolean,required:!0}},methods:{handleLike:function(){this.$emit("handleLike")},handleComment:function(){this.$emit("handleComment")},handleShare:function(){this.$emit("handleShare")},handleMore:function(){this.$emit("handleMore")}}},d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"news-ctrl-box"},[n("div",{staticClass:"news-ctrl-btn",on:{click:t.handleLike}},[n("svg",[n("use",{attrs:{"xlink:href":t.liked?"#feed-like":"#feed-unlike"}})]),n("span",[t._v("喜欢")])]),n("div",{staticClass:"news-ctrl-btn",on:{click:t.handleComment}},[n("svg",[n("use",{attrs:{"xlink:href":"#feed-comment"}})]),n("span",[t._v("评论")])]),n("div",{staticClass:"news-ctrl-btn",on:{click:t.handleShare}},[n("svg",[n("use",{attrs:{"xlink:href":"#base-share"}})]),n("span",[t._v("分享")])]),n("div",{staticClass:"news-ctrl-btn",on:{click:t.handleMore}},[n("svg",[n("use",{attrs:{"xlink:href":"#feed-more"}})]),n("span",[t._v("更多")])])])},u=[],m=n("XyMi");function f(t){n("yMpO")}var p=!1,v=f,w=null,g=null,_=Object(m["a"])(h,d,u,p,v,w,g),y=_.exports,C={name:"comment-card",props:{comment:{},pinned:{type:Boolean,default:!1}},data:function(){return{}},computed:{user:function(){return this.comment.user||{}},reply:function(){return this.comment.reply},body:function(){return this.comment.body||""},time:function(){return this.comment.created_at||""}},methods:{}},k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-wrap"},[n("div",{staticClass:"card-main"},[n("div",{staticClass:"m-box"},[n("v-avatar",{attrs:{sex:t.user.sex,src:t.user.avatar,uid:t.user.id}}),n("div",{staticClass:"m-box-dir m-box-col card-txt-body"},[n("div",{staticClass:"m-box m-box-c"},[n("router-link",{attrs:{tag:"h4",to:"/user/"+t.user.id}},[t._v(t._s(t.user.name))]),n("div",{staticClass:"m-box m-box-c"},[t.pinned?n("i",{staticClass:"pinned-icon"}):t._e(),n("span",{staticClass:"time"},[t._v(t._s(t._f("time2tips")(t.time)))])])],1),n("div",{staticClass:"m-text-box"},[t.reply?n("span",[t._v("回复"),n("router-link",{attrs:{to:"/user/"+t.reply.id}},[t._v(t._s(t.reply.name))]),t._v(":")],1):t._e(),t._v("\n            "+t._s(t.body)+"\n          ")])])],1)])])])},b=[];function x(t){n("g2wY")}var $=!1,E=x,M=null,H=null,A=Object(m["a"])(C,k,b,$,E,M,H),S=A.exports,L="/api/v2/files/",T=(new r.a).use(c.a,L),O={name:"news-detail",components:{newsItem:a["a"],newsToolBar:y,commentItem:S},data:function(){return{preID:0,news:{},recs:[],likes:[],pinneds:[],comments:[],headroom:null,footroom:null}},watch:{newsID:function(t){t&&t!==this.preID&&(this.$refs.loadmore.beforeRefresh(),document.body.scrollTop=0,document.documentElement.scrollTop=0)}},computed:{liked:{get:function(){return this.news.has_like||!1},set:function(t){this.news.has_like=t}},time:function(){return this.news.created_at||""},cate:function(){var t=this.news.category;t=void 0===t?{}:t;var e=t.name,n=void 0===e?"未分类":e;return n},digg_count:function(){return this.news.digg_count||0},created_at:function(){return this.news.created_at},content:function(){return T.render(this.news.content||"")},newsID:function(){return~~this.$route.params.newsID}},activated:function(){},methods:{onRefresh:function(){var t=this;this.preID=this.newsID,this.$http.get("/news/".concat(this.preID)).then(function(e){var n=e.data,i=void 0===n?{}:n;t.news=i,t.$refs.loadmore.topEnd(!1)}),this.$http.get("/news/".concat(this.preID,"/comments")).then(function(e){var n=e.data;n=void 0===n?{}:n;var i=n.comments,s=void 0===i?[]:i,o=n.pinneds,r=void 0===o?[]:o;t.comments=s||[],t.pinneds=r||[]}),this.$http.get("/news/".concat(this.preID,"/likes")).then(function(e){var n=e.data,i=void 0===n?[]:n;t.likes=i||[]}),this.$http.get("/news/".concat(this.preID,"/correlations")).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data,i=void 0===n?[]:n;t.recs=i})},handleLike:function(){var t=this,e=this.liked?"delete":"post";this.$http({method:e,url:"/news/".concat(this.preID,"/likes"),validateStatus:function(t){return 201===t}}).then(function(){t.liked=!t.liked})},handleComment:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.placeholder,i=e.reply_user;this.$Modal.commentInpt({placeholder:n,onOk:function(e){t.$http.post("/news/".concat(t.preID,"/comments"),{params:{body:e,reply_user:i},validateStatus:function(t){return 201===t}}).then(function(e){var n=e.data;n=void 0===n?{}:n;var i=n.comment,s=void 0===i?{}:i,o=n.message,r=void 0===o?{message:"评论成功"}:o;s&&s.id&&(t.$Modal.remove(),t.comments.push(s),t.$Message.success(r))})}})},handleShare:function(){},handleMore:function(){}},mounted:function(){this.headroom=new s.a(this.$refs.head.$el,{tolerance:5,offset:50,classes:{initial:"headroom-head",pinned:"headroom--headShow",unpinned:"headroom--headHide"}}),this.footroom=new s.a(this.$refs.foot.$el,{tolerance:5,offset:50,classes:{initial:"headroom-foot",pinned:"headroom--footShow",unpinned:"headroom--footHide"}}),this.headroom.init(),this.footroom.init()}},I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"news-detail"},[n("head-top",{ref:"head",attrs:{"go-back":!0,title:"资讯详情"}}),n("load-more",{ref:"loadmore",staticClass:"news-detail--body",attrs:{onRefresh:t.onRefresh}},[n("div",{staticClass:"head"},[n("h1",{staticClass:"title"},[t._v(t._s(t.news.title))]),n("p",[n("i",{staticClass:"news-cate"},[t._v(t._s(t.cate))]),t._v(" 来自 "+t._s(t.news.from||"原创"))])]),n("div",{staticClass:"subject"},[t._v(t._s(t.news.subject))]),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}}),n("div",{staticClass:"foot"},[n("div",{staticClass:"foot-left"},[n("ul",{staticClass:"likes-list"},t._l(t.likes.slice(0,5),function(e,i){return e.id?n("li",{key:i,style:{zIndex:5-i,position:"relative"}},[n("v-avatar",{attrs:{sex:e.user.sex,src:e.user.avatar,size:"small"}})],1):t._e()})),t.likes.length>0?n("span",[t._v(t._s(t._f("formatNum")(t.likes.length))+"人点赞")]):t._e()]),n("div",{staticClass:"foot-right"},[n("span",[t._v("发布于"+t._s(t._f("time2tips")(t.time)))]),n("br"),n("span",[t._v(t._s(t._f("formatNum")(t.news.hits||0))+"浏览")])])]),n("section",{staticClass:"m-panel bt10 bdcf4f5f6"},[n("h3",[n("span",[t._v("相关资讯")])]),n("div",{staticClass:"rec-news-list"},t._l(t.recs,function(e){return e.id?n("news-item",{key:e.id,attrs:{news:e}}):t._e()}))]),n("section",{staticClass:"m-panel bt10 bdcf4f5f6"},[n("h3",[n("span",[t._v("评论")])]),n("div",{staticClass:"comments"},[t._l(t.pinneds,function(e){return e.id?n("comment-item",{key:e.id,attrs:{pinned:!0,comment:e}}):t._e()}),t._l(t.comments,function(e){return e.id?n("comment-item",{key:e.id,attrs:{comment:e}}):t._e()})],2)])]),n("news-tool-bar",{ref:"foot",attrs:{liked:t.liked},on:{handleLike:t.handleLike,handleMore:t.handleMore,handleShare:t.handleShare,handleComment:t.handleComment}})],1)},R=[];function D(t){n("hdko")}var B=!1,q=D,P=null,N=null,j=Object(m["a"])(O,I,R,B,q,P,N);e["default"]=j.exports},"/8du":function(t,e){},DXP0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("rzQm"),s=n.n(i),o=n("Hsq6"),r={name:"news-search",components:{newsItem:o["a"]},data:function(){return{keyword:"",list:[]}},computed:{after:function(){var t=this.list.length;return t>0?this.list[t-1].id:0},topEvent:function(){var t=this.keyword.length;return t>0?this.onRefresh:null}},methods:{beforeSearch:function(t){if(this.keyword){var e=t.type;switch(e){case"click":return this.onRefresh();case"keypress":return 13===t.keyCode&&this.onRefresh()}}},onRefresh:function(){var t=this;if(!this.keyword)return this.$refs.loadmore.topEnd(!1);this.$http.get("/news",{params:{limit:15,key:this.keyword}}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.data;t.list=n,t.$refs.loadmore.topEnd(!(n.length<15))})},onLoadMore:function(){var t=this;if(!this.keyword)return this.$refs.loadmore.bottomEnd(!0);this.$http.get("/news",{params:{limit:15,key:this.keyword,after:this.after}}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.data;n.length>0&&(t.list=s()(t.list).concat(s()(t.data))),t.$refs.loadmore.bottomEnd(n.length<15)})}}},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-news-search"},[n("head-top",{attrs:{"go-back":!0,append:!0,title:"搜索资讯"}},[n("div",{staticClass:"head-top-cancel",attrs:{slot:"append"},on:{click:t.beforeSearch},slot:"append"},[t._v("搜索")]),n("div",{staticClass:"p-news-search-input",attrs:{slot:"title"},slot:"title"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text"},domProps:{value:t.keyword},on:{keypress:function(e){t.beforeSearch(e)},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})])]),n("load-more",{ref:"loadmore",staticClass:"p-news-search-body",attrs:{onRefresh:t.topEvent,onLoadMore:t.onLoadMore}},t._l(t.list,function(e){return e.id?n("news-item",{key:e.id,attrs:{news:e}}):t._e()}))],1)},l=[],c=n("XyMi");function h(t){n("qRXe")}var d=!1,u=h,m=null,f=null,p=Object(c["a"])(r,a,l,d,u,m,f);e["default"]=p.exports},Hsq6:function(t,e,n){"use strict";n("EuXz");var i={name:"news-item",props:["news"],data:function(){return{hits:0,cate:null,image:null,title:null,author:null,time:""}},methods:{formatData:function(){var t=this.news,e=t.hits,n=void 0===e?0:e,i=t.author,s=void 0===i?"":i,o=t.image,r=void 0===o?{}:o,a=t.title,l=void 0===a?"":a,c=t.created_at,h=t.category,d=void 0===h?{}:h;this.hits=n,this.title=l,this.author=s,this.time=c,this.cate=d.name,this.image=r?"/api/v2/files/".concat(r.id):null}},mounted:function(){this.formatData()}},s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"news-item",attrs:{tag:"div",to:"/news/"+t.news.id,replace:""}},[n("section",{staticClass:"news-item--body"},[n("h2",[t._v(t._s(t.title))]),n("p",[n("i",{staticClass:"news-cate"},[t._v(t._s(t.cate))]),n("span",[t._v("作者 "+t._s(t.author))]),n("span",[t._v("・"+t._s(t.hits)+"浏览")]),n("span",[t._v("・"+t._s(t._f("time2tips")(t.time)))])])]),t.image?n("div",{staticClass:"news-item--poster"},[n("img",{directives:[{name:"lazyload",rawName:"v-lazyload",value:t.image,expression:"image"}]})]):t._e()])},o=[],r=n("XyMi");function a(t){n("yXz+")}var l=!1,c=a,h=null,d=null,u=Object(r["a"])(i,s,o,l,c,h,d);e["a"]=u.exports},"ICK/":function(t,e){},LhTa:function(t,e,n){var i=n("rFzY"),s=n("Q6Nf"),o=n("FryR"),r=n("BbyF"),a=n("plSV");t.exports=function(t,e){var n=1==t,l=2==t,c=3==t,h=4==t,d=6==t,u=5==t||d,m=e||a;return function(e,a,f){for(var p,v,w=o(e),g=s(w),_=i(a,f,3),y=r(g.length),C=0,k=n?m(e,y):l?m(e,0):void 0;y>C;C++)if((u||C in g)&&(p=g[C],v=_(p,C,w),t))if(n)k[C]=v;else if(v)switch(t){case 3:return!0;case 5:return p;case 6:return C;case 2:k.push(p)}else if(h)return!1;return d?-1:c||h?h:k}}},U6qc:function(t,e,n){"use strict";var i=n("Ds5P"),s=n("LhTa")(6),o="findIndex",r=!0;o in[]&&Array(1)[o](function(){r=!1}),i(i.P+i.F*r,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n("RhFG")(o)},XO1R:function(t,e,n){var i=n("ydD5");t.exports=Array.isArray||function(t){return"Array"==i(t)}},boo2:function(t,e,n){var i=n("UKM+"),s=n("XO1R"),o=n("kkCw")("species");t.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),i(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},g2wY:function(t,e){},hAM4:function(t,e,n){var i,s,o;(function(n,r){"use strict";s=[],i=r,o="function"===typeof i?i.apply(e,s):i,void 0===o||(t.exports=o)})(0,function(){"use strict";var t={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};function e(t){this.callback=t,this.ticking=!1}function n(t){return t&&"undefined"!==typeof window&&(t===window||t.nodeType)}function i(t){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var e,s,o=t||{};for(s=1;s<arguments.length;s++){var r=arguments[s]||{};for(e in r)"object"!==typeof o[e]||n(o[e])?o[e]=o[e]||r[e]:o[e]=i(o[e],r[e])}return o}function s(t){return t===Object(t)?t:{down:t,up:t}}function o(t,e){e=i(e,o.options),this.lastKnownScrollY=0,this.elem=t,this.tolerance=s(e.tolerance),this.classes=e.classes,this.offset=e.offset,this.scroller=e.scroller,this.initialised=!1,this.onPin=e.onPin,this.onUnpin=e.onUnpin,this.onTop=e.onTop,this.onNotTop=e.onNotTop,this.onBottom=e.onBottom,this.onNotBottom=e.onNotBottom}return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,e.prototype={constructor:e,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},o.prototype={constructor:o,init:function(){if(o.cutsTheMustard)return this.debouncer=new e(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var t=this.classes;for(var e in this.initialised=!1,t)t.hasOwnProperty(e)&&this.elem.classList.remove(t[e]);this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var t=this.elem.classList,e=this.classes;!t.contains(e.pinned)&&t.contains(e.unpinned)||(t.add(e.unpinned),t.remove(e.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var t=this.elem.classList,e=this.classes;t.contains(e.unpinned)&&(t.remove(e.unpinned),t.add(e.pinned),this.onPin&&this.onPin.call(this))},top:function(){var t=this.elem.classList,e=this.classes;t.contains(e.top)||(t.add(e.top),t.remove(e.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notTop)||(t.add(e.notTop),t.remove(e.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var t=this.elem.classList,e=this.classes;t.contains(e.bottom)||(t.add(e.bottom),t.remove(e.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notBottom)||(t.add(e.notBottom),t.remove(e.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(t){return Math.max(t.offsetHeight,t.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)},getElementHeight:function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(t){var e=t<0,n=t+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return e||n},toleranceExceeded:function(t,e){return Math.abs(t-this.lastKnownScrollY)>=this.tolerance[e]},shouldUnpin:function(t,e){var n=t>this.lastKnownScrollY,i=t>=this.offset;return n&&i&&e},shouldPin:function(t,e){var n=t<this.lastKnownScrollY,i=t<=this.offset;return n&&e||i},update:function(){var t=this.getScrollY(),e=t>this.lastKnownScrollY?"down":"up",n=this.toleranceExceeded(t,e);this.isOutOfBounds(t)||(t<=this.offset?this.top():this.notTop(),t+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(t,n)?this.unpin():this.shouldPin(t,n)&&this.pin(),this.lastKnownScrollY=t)}},o.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},o.cutsTheMustard="undefined"!==typeof t&&t.rAF&&t.bind&&t.classList,o})},hdko:function(t,e){},plSV:function(t,e,n){var i=n("boo2");t.exports=function(t,e){return new(i(t))(e)}},qRXe:function(t,e){},sO8D:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("rzQm"),s=n.n(i),o=n("Hsq6"),r=(n("SldL"),n("7hDC")),a=n.n(r),l=(n("n12u"),n("U6qc"),"news__filter"),c={name:"NewsFilter",data:function(){return{prefixCls:l,editing:!1,showAll:!1,myCates:[],moreCates:[],currentCate:{id:0,name:"推荐"}}},watch:{editing:function(){},showAll:function(t){!t&&(this.editing=!1)}},methods:{showEditor:function(){this.showAll=!this.showAll},onOk:function(){if(this.editing){this.editing=!1;var t=this.myCates.map(function(t){return t.id}).join(",");this.$http.patch("/news/categories/follows",{follows:t}),this.showAll=!1,this.$emit("onOk",this.myCates)}else this.editing=!0},chooseCate:function(t,e){if(this.showAll)if(this.editing){var n=this.myCates.findIndex(function(t){return t.id===e.id});if(n>-1)this.moreCates.push(e),this.myCates.splice(n,1);else{var i=this.moreCates.findIndex(function(t){return t.id===e.id});this.myCates.push(e),this.moreCates.splice(i,1)}}else this.editing=!0;else if(e.id!==this.currentCate.id){var s=t.target;this.currentCate=Object.assign({},e,{el:s}),this.$emit("change",this.currentCate)}},fetchCates:function(){var t=a()(regeneratorRuntime.mark(function t(){var e,n,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/news/cates");case 2:e=t.sent,n=e.data,n=void 0===n?{}:n,i=n.my_cates,o=n.more_cates,this.myCates=i?s()(i):[],this.moreCates=o?s()(o):[];case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.fetchCates()}},h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.prefixCls,{showAll:t.showAll}]},[n("div",{class:t.prefixCls+"--head"},[n("span",[t._v("点击以编辑")]),n("div",[n("button",{on:{click:t.onOk}},[t._v(t._s(t.editing?"完成":"编辑"))]),n("button",{on:{click:t.showEditor}},[t._v("收起")])])]),n("div",{class:t.prefixCls+"--list__wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAll,expression:"!showAll"}],class:t.prefixCls+"--switch",on:{click:t.showEditor}},[n("svg",[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-arrow-r"}})])]),n("span",{class:t.prefixCls+"--list__label"},[t._v("我的订阅")]),n("div",{class:[t.prefixCls+"--list",{editing:t.editing}]},[n("div",{class:[t.prefixCls+"--list__item",{active:0===~~t.currentCate.id}],on:{click:function(e){t.chooseCate(e,{id:0,name:"推荐"})}}},[t._v("推荐")]),t._l(t.myCates,function(e){return n("div",{key:"myCate-"+e.id,class:[t.prefixCls+"--list__item",{active:e.id===t.currentCate.id}],on:{click:function(n){t.chooseCate(n,e)}}},[t._v(t._s(e.name))])})],2)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAll,expression:"showAll"}],class:t.prefixCls+"--list__wrap"},[n("span",{class:t.prefixCls+"--list__label"},[t._v("更多订阅")]),n("div",{class:t.prefixCls+"--list"},t._l(t.moreCates,function(e){return n("div",{key:"moreCate-"+e.id,class:[t.prefixCls+"--list__item"],on:{click:function(n){t.chooseCate(n,e)}}},[t._v(t._s(e.name))])}))])])},d=[],u=n("XyMi");function m(t){n("ICK/")}var f=!1,p=m,v=null,w=null,g=Object(u["a"])(c,h,d,f,p,v,w),_=g.exports,y={name:"news-index",components:{newsItem:o["a"],newsFilter:_},data:function(){return{list:[],currentCate:0}},computed:{after:function(){var t=this.list.length;return t>0?this.list[t-1].id:0}},methods:{onCateChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=void 0===e?0:e;this.list=[],this.currentCate=n,this.$refs.loadmore.beforeRefresh()},onRefresh:function(){var t=this,e=0===this.currentCate?{limit:10,recommend:1}:{limit:10,cate_id:this.currentCate};this.$http.get("/news",{params:e}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data,i=void 0===n?[]:n;t.list=i,t.$refs.loadmore.topEnd(!(i.length<10))})},onLoadMore:function(){var t=this,e=0===this.currentCate?{limit:10,recommend:1,after:this.after}:{limit:10,cate_id:this.currentCate,after:this.after};this.$http.get("/news",{params:e}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data,i=void 0===n?[]:n;t.list=s()(t.list).concat(s()(i)),t.$refs.loadmore.bottomEnd(i.length<10)})}}},C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-news"},[n("head-top",{attrs:{"go-back":!0,title:"资讯",append:!0}},[n("router-link",{attrs:{slot:"append",to:"search",append:"",tag:"svg"},slot:"append"},[n("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#base-search"}})])],1),n("news-filter",{on:{change:t.onCateChange}}),n("load-more",{ref:"loadmore",staticClass:"p-news--body",attrs:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},t._l(t.list,function(e){return e.id?n("news-item",{key:e.id,attrs:{news:e}}):t._e()}))],1)},k=[];function b(t){n("/8du")}var x=!1,$=b,E=null,M=null,H=Object(u["a"])(y,C,k,x,$,E,M);e["default"]=H.exports},yMpO:function(t,e){},"yXz+":function(t,e){}});
//# sourceMappingURL=6.bcb498d4.js.map