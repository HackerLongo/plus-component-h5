webpackJsonp([7],{"24d9":function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"feed.vue",sourceRoot:""}])},"2Owi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={computed:{text:function(){var e=this.feed.feed_content;return e=!!e&&(e.length<49?e:this.isPay?""+e.slice(0,40):e.slice(0,49)+"…")},title:function(){return""},hasLike:function(){return this.feed.has_like},likeCount:function(){return this.feed.like_count},viewCount:function(){return this.feed.feed_view_count},commentCount:function(){return this.feed.feed_comment_count}},methods:{viewFeed:function(){this.$router.push("/feed-detail/"+this.feed.id)},formatData:function(){console.log("format data")},likeFeed:function(){var e=this,t=this.hasLike?"delete":"post",n=this.hasLike?"/feeds/"+this.feed.id+"/unlike":"/feeds/"+this.feed.id+"/like",i=this.hasLike?this.feed.like_count-1:this.feed.like_count+1;this.$http({url:n,method:t}).then(function(t){t.data;e.feed.has_like=!e.feed.has_like,e.feed.like_count=i}).catch(function(e){console.log(e)})},moreAction:function(){console.log("更多操作")},commentFeed:function(e,t,n){var i=this;this.$http.post("/feeds/"+this.feed.id+"/comments",{body:e,reply_user:t}).then(function(e){var t=e.data;t=void 0===t?{}:t;var o=(t.message,t.comment);i.feed.comments.unshift(o),i.feed.feed_comment_count+=1,n&&n()}).catch(function(e){var t=e.response;t=void 0===t?{}:t;var o=t.data,s=void 0===o?{message:"评论失败"}:o;i.$Message.error(s),n&&n()})},deleteComment:function(e,t){console.log("删除评论:",e)},pinnedComment:function(e,t){console.log("申请评论置顶:",e)}}}},"3I9g":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user.id?n("div",{staticClass:"feed-comment-item",on:{click:function(t){t.stopPropagation(),e.commentAction(t)}}},[n("a",{staticClass:"user-name",on:{click:function(t){t.stopPropagation(),e.to("/user/"+e.user.id)}}},[e._v(e._s(e.user.name))]),e._v(" "),e.replyUser?[e._v("\n    回复\n    "),n("a",{staticClass:"user-name",on:{click:function(t){t.stopPropagation(),e.to("/user/"+e.replyUser.id)}}},[e._v(e._s(e.replyUser.name))])]:e._e(),e._v(" "),n("span",{staticClass:"content"},[e._v(e._s(e.body))])],2):e._e()},o=[],s={render:i,staticRenderFns:o};t.a=s},"4zVB":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("us/S"),s=i(o),r=n("BO1k"),a=i(r),A=n("woOf"),d=i(A),c=function(){function e(e,t){var n=[],i=!0,o=!1,s=void 0;try{for(var r,A=(0,a.default)(e);!(i=(r=A.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{!i&&A.return&&A.return()}finally{if(o)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,s.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=d.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=n("14gb"),m=i(l);t.default={name:"m-pics",props:{id:{type:Number,required:!0},pics:{type:Array}},methods:{handleClick:function(e,t){var n=this.$el.querySelectorAll(".m-pic"),i=this.pics.map(function(e,t){return f({},e,{el:n[t]})});m.default.$emit("mvGallery",t,i)},isLongImg:function(e){var t=e.size.split("x"),n=c(t,2),i=n[0],o=n[1];return e.title="查看原图",e.src="/api/v2/files/"+e.file,e.w=i,e.h=o,i>3*o||o>3*i},longStyle:function(e,t){return e=e>518?518:e,t=t>960?960:t,{width:e+"px",paddingBottom:t/e*100+"%"}}}}},"5PlU":function(e,t,n){var i=n("RY/4"),o=n("dSzd")("iterator"),s=n("/bQp");e.exports=n("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||s.hasOwnProperty(i(t))}},"5iQL":function(e,t,n){"use strict";function i(e){n("Ksvl")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("B0ts"),s=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var a=n("3I9g"),A=n("VU/8"),d=i,c=A(s.a,a.a,!1,d,null,null);t.default=c.exports},"5o08":function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,".feed-tool[data-v-26378d96]{width:100%;height:.9rem;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.feed-tool-item[data-v-26378d96],.feed-tool[data-v-26378d96]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.feed-tool-item[data-v-26378d96]{color:#b3b3b3;font-size:.24rem}.feed-tool-item span[data-v-26378d96]{margin-left:.1rem}.feed-tool-item.hasLike[data-v-26378d96]{color:#f4504d}.feed-tool-icon[data-v-26378d96]{width:.4rem;height:.4rem}","",{version:3,sources:["/Users/SevenDu/Desktop/working/plus-component-h5/src/components/feed/components/feedTools.vue"],names:[],mappings:"AACA,4BACE,WAAY,AACZ,aAAe,AASf,yBAA0B,AAC1B,sCAAuC,AACnC,sBAAuB,AACnB,6BAA+B,CACxC,AACD,6DAbE,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AACxB,sBAAuB,AACnB,kBAAoB,CAiB7B,AAXD,iCAKE,cAAe,AACf,gBAAmB,CAKpB,AACD,sCACE,iBAAoB,CACrB,AACD,yCACE,aAAe,CAChB,AACD,iCACE,YAAc,AACd,YAAe,CAChB",file:"feedTools.vue",sourcesContent:["\n.feed-tool[data-v-26378d96] {\n  width: 100%;\n  height: 0.9rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.feed-tool-item[data-v-26378d96] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  color: #b3b3b3;\n  font-size: 0.24rem;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.feed-tool-item span[data-v-26378d96] {\n  margin-left: 0.1rem;\n}\n.feed-tool-item.hasLike[data-v-26378d96] {\n  color: #f4504d;\n}\n.feed-tool-icon[data-v-26378d96] {\n  width: 0.4rem;\n  height: 0.4rem;\n}"],sourceRoot:""}])},"5xMQ":function(e,t,n){"use strict";function i(e){n("sksa")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("NBM4"),s=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var a=n("ShHw"),A=n("VU/8"),d=i,c=A(s.a,a.a,!1,d,null,null);t.default=c.exports},AyBW:function(e,t,n){"use strict";function i(e){n("UUtr")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("ZjKa"),s=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var a=n("iEwy"),A=n("VU/8"),d=i,c=A(s.a,a.a,!1,d,"data-v-26378d96",null);t.default=c.exports},B0ts:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"feedCommentItem",props:{comment:{required:!0}},computed:{user:function(){var e=this.comment.user;if(e)return e},replyUser:function(){return this.comment.reply},body:function(){var e=this.comment.body;return e.length>60?e.slice(0,57)+"…":e}},methods:{to:function(e){this.$router.push({path:e})},commentAction:function(){this.$emit("action",this.user.id,this.user.name,this.comment.id)}},mounted:function(){this.user.id&&this.$store.commit("SAVE_USER",this.user)}}},BO1k:function(e,t,n){e.exports={default:n("fxRn"),__esModule:!0}},BZ8j:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("head-top",[n("div",{staticClass:"head-top-nav",attrs:{slot:"nav"},slot:"nav"},[n("router-link",{staticClass:"head-top-nav-item",attrs:{to:"/feed/new"}},[e._v("最新")]),e._v(" "),n("router-link",{staticClass:"head-top-nav-item",attrs:{to:"/feed/hot"}},[e._v("热门")]),e._v(" "),n("router-link",{staticClass:"head-top-nav-item",attrs:{to:"/feed/follow"}},[e._v("关注")])],1)]),e._v(" "),n("load-more",{ref:"loadmore",attrs:{onRefresh:e.onRefresh,onLoadMore:e.onLoadMore}},e._l(e.feeds,function(t){return n("feed-item",{key:"feed-"+e.feed_type+"-"+t.id,attrs:{channel:"feed",feed:t}})})),e._v(" "),n("foot-guide")],1)},o=[],s={render:i,staticRenderFns:o};t.a=s},EHbG:function(e,t,n){"use strict";function i(e){n("fW/j")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("4zVB"),s=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var a=n("LIjd"),A=n("VU/8"),d=i,c=A(s.a,a.a,!1,d,null,null);t.default=c.exports},JxHX:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,".feed-detail{font-size:.3rem}.feed-detail-content{padding-left:.2rem;padding-right:.2rem;background-color:#fff}.feed-detail .head-top+*{padding-top:.9rem}.ffd-head{padding-left:.2rem;padding-right:.2rem;background-color:#fff}.ffd-head h1{font-size:.5rem;padding:0;margin:.1rem 0}.ffd-head p{color:#ccc;font-size:.24rem}.ffd-head p a{color:#59b6d7}.ffd-like-list{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:.25rem}.ffd-like-list-item{width:.24rem}.ffd-like-list-none{margin-right:0}.ffd-body{padding-top:.9rem;padding:.5rem 0;background-color:#fff}.ffd-body-images{width:100%}.ffd-body-images img{background-color:#f4f5f5}.ffd-body-content{width:100%;overflow-x:auto;word-break:break-all;padding:.1rem .2rem}.ffd-body-l{color:#59b6d7;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.ffd-body-r{text-align:right;color:#999}.ffd-body p{padding-left:.2rem;padding-right:.2rem}.ffd-body-foot{margin-top:.5rem;padding:0 .2rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.ffd-body-foot p{margin:0;padding:0}.ffd-foot{background-color:#fff;margin-top:.1rem;padding-bottom:.95rem}.ffd-foot-head{padding-left:.2rem;padding-right:.2rem;border-bottom:1px solid #ededed;height:.8rem;line-height:.8rem}.ffd-comment-item{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:.28rem .2rem 0;min-height:1.25rem;-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}.ffd-comment-item .v-avatar{-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto}.ffd-comment-item+.ffd-comment-item{border-top:1px solid #ededed}.ffd-comment-item p{margin:0;margin-bottom:.28rem}.ffd-comment-body{max-width:-webkit-calc(100% - .76rem);max-width:calc(100% - .76rem);overflow-x:hidden;-webkit-box-flex:1;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:0 0 0 .3rem;color:#999}.ffd-comment-body p{margin-top:.1rem}.ffd-comment-body-reply{margin-top:.1rem;margin-bottom:.28rem}.ffd-comment-body-reply span{color:#333}.ffd-comment-body-reply i{font-style:normal}.ffd-comment-body-top span{color:#333}.ffd-comment-body-top span+span{color:#4bb893;border:.01rem solid #4bb893;padding:.02rem;font-size:.22rem;margin-left:.1rem}.ffd-comment-body-top span+span+span{margin-right:0}.ffd-comment-body-usually{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.ffd-comment-body-usually span{color:#333}.ffd-comment-body-usually span+span{color:#999;font-size:.22rem}.ffd-action{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;position:fixed;bottom:0;left:0;right:0;height:.95rem;line-height:.95rem;text-align:center;background-color:#fff;border-top:.01rem solid #ededed}.ffd-action-item{line-height:1.4;font-size:.24rem;color:#b3b3b3}.ffd-action-item .v-icon{width:.38rem;height:.38rem}.ffd-action-item p{margin:0}","",{version:3,sources:["/Users/SevenDu/Desktop/working/plus-component-h5/src/page/feed/components/feedDetail.vue"],names:[],mappings:"AACA,aACE,eAAkB,CACnB,AACD,qBACE,mBAAqB,AACrB,oBAAsB,AACtB,qBAAuB,CACxB,AACD,yBACE,iBAAoB,CACrB,AACD,UACE,mBAAqB,AACrB,oBAAsB,AACtB,qBAAuB,CACxB,AACD,aACE,gBAAkB,AAClB,UAAW,AACX,cAAiB,CAClB,AACD,YACE,WAAY,AACZ,gBAAmB,CACpB,AACD,cACE,aAAe,CAChB,AACD,eACE,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,aAAc,AACd,mBAAsB,CACvB,AACD,oBACE,YAAe,CAChB,AACD,oBACE,cAAgB,CACjB,AACD,UACE,kBAAoB,AACpB,gBAAkB,AAClB,qBAAuB,CACxB,AACD,iBACE,UAAY,CACb,AACD,qBACE,wBAA0B,CAC3B,AACD,kBACE,WAAY,AACZ,gBAAiB,AACjB,qBAAsB,AACtB,mBAAuB,CACxB,AACD,YACE,cAAe,AACf,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AACxB,sBAAuB,AACnB,kBAAoB,CAC7B,AACD,YACE,iBAAkB,AAClB,UAAY,CACb,AACD,YACE,mBAAqB,AACrB,mBAAsB,CACvB,AACD,eACE,iBAAmB,AACnB,gBAAkB,AAClB,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AACxB,sBAAuB,AACnB,mBAAoB,AAC5B,yBAA0B,AAC1B,sCAAuC,AACnC,sBAAuB,AACnB,6BAA+B,CACxC,AACD,iBACE,SAAU,AACV,SAAW,CACZ,AACD,UACE,sBAAuB,AACvB,iBAAmB,AACnB,qBAAwB,CACzB,AACD,eACE,mBAAqB,AACrB,oBAAsB,AACtB,gCAAiC,AACjC,aAAe,AACf,iBAAoB,CACrB,AACD,kBACE,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,aAAc,AACd,uBAA0B,AAC1B,mBAAoB,AACpB,wBAAyB,AACzB,+BAAgC,AAC5B,qBAAsB,AAClB,uBAAwB,AAChC,uBAAwB,AACxB,mCAAoC,AAChC,oBAAqB,AACjB,0BAA4B,CACrC,AACD,4BACE,mBAAoB,AACpB,sBAAuB,AACnB,kBAAmB,AACf,aAAe,CACxB,AACD,oCACE,4BAA8B,CAC/B,AACD,oBACE,SAAU,AACV,oBAAuB,CACxB,AACD,kBACE,sCAAyC,AACzC,8BAAiC,AACjC,kBAAmB,AACnB,mBAAoB,AACpB,sBAAuB,AACnB,kBAAmB,AACf,cAAe,AACvB,mBAAsB,AACtB,UAAY,CACb,AACD,oBACE,gBAAmB,CACpB,AACD,wBACE,iBAAmB,AACnB,oBAAuB,CACxB,AACD,6BACE,UAAY,CACb,AACD,0BACE,iBAAmB,CACpB,AACD,2BACE,UAAY,CACb,AACD,gCACE,cAAe,AACf,4BAA8B,AAC9B,eAAiB,AACjB,iBAAmB,AACnB,iBAAoB,CACrB,AACD,qCACE,cAAgB,CACjB,AACD,0BACE,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AAC1B,sCAAuC,AACnC,sBAAuB,AACnB,6BAA+B,CACxC,AACD,+BACE,UAAY,CACb,AACD,oCACE,WAAY,AACZ,gBAAmB,CACpB,AACD,YACE,oBAAqB,AACrB,qBAAsB,AACtB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AACxB,sBAAuB,AACnB,mBAAoB,AAC5B,qCAAsC,AAClC,yBAA0B,AACtB,6BAA8B,AACtC,eAAgB,AAChB,SAAU,AACV,OAAQ,AACR,QAAS,AACT,cAAgB,AAChB,mBAAqB,AACrB,kBAAmB,AACnB,sBAAuB,AACvB,+BAAkC,CACnC,AACD,iBACE,gBAAiB,AACjB,iBAAmB,AACnB,aAAe,CAChB,AACD,yBACE,aAAe,AACf,aAAgB,CACjB,AACD,mBACE,QAAU,CACX",file:"feedDetail.vue",sourcesContent:["\n.feed-detail {\n  font-size: 0.3rem;\n}\n.feed-detail-content {\n  padding-left: 0.2rem;\n  padding-right: 0.2rem;\n  background-color: #fff;\n}\n.feed-detail .head-top + * {\n  padding-top: 0.9rem;\n}\n.ffd-head {\n  padding-left: 0.2rem;\n  padding-right: 0.2rem;\n  background-color: #fff;\n}\n.ffd-head h1 {\n  font-size: 0.5rem;\n  padding: 0;\n  margin: 0.1rem 0;\n}\n.ffd-head p {\n  color: #ccc;\n  font-size: 0.24rem;\n}\n.ffd-head p a {\n  color: #59b6d7;\n}\n.ffd-like-list {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  margin-right: 0.25rem;\n}\n.ffd-like-list-item {\n  width: 0.24rem;\n}\n.ffd-like-list-none {\n  margin-right: 0;\n}\n.ffd-body {\n  padding-top: 0.9rem;\n  padding: 0.5rem 0;\n  background-color: #fff;\n}\n.ffd-body-images {\n  width: 100%;\n}\n.ffd-body-images img {\n  background-color: #f4f5f5;\n}\n.ffd-body-content {\n  width: 100%;\n  overflow-x: auto;\n  word-break: break-all;\n  padding: 0.1rem 0.2rem;\n}\n.ffd-body-l {\n  color: #59b6d7;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.ffd-body-r {\n  text-align: right;\n  color: #999;\n}\n.ffd-body p {\n  padding-left: 0.2rem;\n  padding-right: 0.2rem;\n}\n.ffd-body-foot {\n  margin-top: 0.5rem;\n  padding: 0 0.2rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.ffd-body-foot p {\n  margin: 0;\n  padding: 0;\n}\n.ffd-foot {\n  background-color: #fff;\n  margin-top: 0.1rem;\n  padding-bottom: 0.95rem;\n}\n.ffd-foot-head {\n  padding-left: 0.2rem;\n  padding-right: 0.2rem;\n  border-bottom: 1px solid #ededed;\n  height: 0.8rem;\n  line-height: 0.8rem;\n}\n.ffd-comment-item {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 0.28rem 0.2rem 0;\n  min-height: 1.25rem;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  -webkit-box-pack: start;\n  -webkit-justify-content: flex-start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n}\n.ffd-comment-item .v-avatar {\n  -webkit-box-flex: 0;\n  -webkit-flex: 0 0 auto;\n      -ms-flex: 0 0 auto;\n          flex: 0 0 auto;\n}\n.ffd-comment-item + .ffd-comment-item {\n  border-top: 1px solid #ededed;\n}\n.ffd-comment-item p {\n  margin: 0;\n  margin-bottom: 0.28rem;\n}\n.ffd-comment-body {\n  max-width: -webkit-calc(100% -  0.76rem);\n  max-width: calc(100% -  0.76rem);\n  overflow-x: hidden;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1 1 auto;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto;\n  margin: 0  0 0 0.3rem;\n  color: #999;\n}\n.ffd-comment-body p {\n  margin-top: 0.1rem;\n}\n.ffd-comment-body-reply {\n  margin-top: 0.1rem;\n  margin-bottom: 0.28rem;\n}\n.ffd-comment-body-reply span {\n  color: #333;\n}\n.ffd-comment-body-reply i {\n  font-style: normal;\n}\n.ffd-comment-body-top span {\n  color: #333;\n}\n.ffd-comment-body-top span + span {\n  color: #4bb893;\n  border: 0.01rem solid #4bb893;\n  padding: 0.02rem;\n  font-size: 0.22rem;\n  margin-left: 0.1rem;\n}\n.ffd-comment-body-top span + span + span {\n  margin-right: 0;\n}\n.ffd-comment-body-usually {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.ffd-comment-body-usually span {\n  color: #333;\n}\n.ffd-comment-body-usually span + span {\n  color: #999;\n  font-size: 0.22rem;\n}\n.ffd-action {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-justify-content: space-around;\n      -ms-flex-pack: distribute;\n          justify-content: space-around;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 0.95rem;\n  line-height: 0.95rem;\n  text-align: center;\n  background-color: #fff;\n  border-top: 0.01rem solid #ededed;\n}\n.ffd-action-item {\n  line-height: 1.4;\n  font-size: 0.24rem;\n  color: #b3b3b3;\n}\n.ffd-action-item .v-icon {\n  width: 0.38rem;\n  height: 0.38rem;\n}\n.ffd-action-item p {\n  margin: 0;\n}"],sourceRoot:""}])},Ksvl:function(e,t,n){var i=n("gEq1");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("b587f36a",i,!0,{})},LIjd:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["m-pics","m-pics-"+e.pics.length],attrs:{id:"m-pics"+e.id}},[n("ul",{staticClass:"m-pics-list"},e._l(e.pics,function(t,i){return n("li",{key:"pics-"+e.id+"-"+i},[n("div",{class:["m-pics-box",{long:e.isLongImg(t)}],style:1===e.pics.length?e.longStyle(t.w,t.h):""},[n("div",{staticClass:"m-pic",style:{backgroundImage:"url("+t.src+")"},on:{click:function(t){t.stopPropagation(),e.handleClick(t,i)}}})])])}))])},o=[],s={render:i,staticRenderFns:o};t.a=s},NBM4:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new r.default(function(e,n){function i(o,s){try{var a=t[o](s),A=a.value}catch(e){return void n(e)}if(!a.done)return r.default.resolve(A).then(function(e){i("next",e)},function(e){i("throw",e)});e(A)}return i("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("//Fk"),r=i(s),a=n("woOf"),A=i(a),d=n("Xxa5"),c=i(d),f=n("M4fF"),l=i(f),m=n("BW2B"),u=i(m);t.default={name:"feedDetail",components:{HeadTop:u.default},data:function(){return{body:"",created_at:"",images:[],comments:[],comments_count:0,liked:!1,likes_count:0,views_count:0,user:{},likesList:[],pinneds:[]}},computed:{bodyWith:function(){return this.$refs.body},feedID:function(){return this.$route.params.feedID},currentUserId:function(){return this.$store.state.CURRENTUSER.id||0},currentUserToken:function(){return this.$store.state.CURRENTUSER.token||""},clientWidth:function(){return this.$refs.content.clientWidth||0},baseUrl:function(){return document.head.querySelector('meta[name="api-basename"]').content},imagesFormat:function(){var e=this;if(0===this.images.length)return[];var t=[];return this.images.map(function(n){var i={},o=l.default.split(n.size,"x"),s=parseInt(o[0])/e.clientWidth;i.width=e.clientWidth,i.height=parseInt(parseInt(o[1])/s),i.url=e.baseUrl+"/files/"+n.file+"?token="+e.currentUserToken,t.push(i)}),t}},methods:{goToUserHome:function(e){this.$router.push("/user/"+e)},initData:function(){var e=this;return o(c.default.mark(function t(){var n,i,o,s,r,a,A,d,f,l;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/feeds/"+e.feedID);case 2:n=t.sent,i=n.data,o=i.feed_content,s=i.created_at,r=i.images,a=i.feed_comment_count,A=i.has_like,d=i.like_count,f=i.feed_view_count,l=i.user,e.body=o,e.created_at=s,e.images=r,e.comments_count=a,e.liked=A,e.likes_count=d,e.views_count=f,e.user=l;case 20:case"end":return t.stop()}},t,e)}))()},getComments:function(){var e=this;return o(c.default.mark(function t(){var n,i;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/feeds/"+e.feedID+"/comments",{limit:15});case 2:n=t.sent,i=n.data,e.comments=i.comments,e.pinneds=i.pinneds;case 6:case"end":return t.stop()}},t,e)}))()},getFeedLikes:function(){var e=this;return o(c.default.mark(function t(){var n,i;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/feeds/"+e.feedID+"/likes",{limit:5});case 2:n=t.sent,i=n.data,e.likesList=i;case 5:case"end":return t.stop()}},t,e)}))()},goBack:function(){this.$router.go(-1)},to:function(e){(e="string"==typeof e?{path:e}:e)&&this.$router.push(e)},likeFeed:function(){var e=this,t=this.liked?"delete":"post",n=this.liked?"/feeds/"+this.feedID+"/unlike":"/feeds/"+this.feedID+"/like",i=this.liked?this.likes_count-1:this.likes_count+1;this.$http({method:t,url:n}).then(function(t){t.data;e.liked=!e.liked,e.likes_count=i;var n=e.$store.getters.getUserById(e.currentUserId);e.liked?e.likesList.unshift({user:n,user_id:e.currentUserId}):l.default.remove(e.likesList,function(t){return t.user_id===e.currentUserId})})},commentFeed:function(e,t,n){var i=this;this.$http.post("/feeds/"+this.feedID+"/comments",{body:e,reply_user:t}).then(function(e){var t=e.data;t=void 0===t?{}:t;var n=t.message,o=t.comment;i.comments.unshift(o),i.comments_count+=1,i.$Modal.remove(),i.$Message.success(n)})},commentAction:function(e,t,n){if(e===this.$store.state.CURRENTUSER.id)this.showCommentAction(n);else{var i=t&&e?"回复: "+t:"随便说说";this.showCommentInput({placeholder:i,reply_user:e})}},deleteComment:function(e,t){var n=this;this.$http.delete("/feeds/"+this.feedID+"/comments/"+e,{validateStatus:function(e){return 204===e}}).then(function(){n.$Message.success("删除成功"),n.comments_count-=1,l.default.remove(n.comments,function(t){return t.id===e})})},showCommentAction:function(e){var t=this;t.$Modal.info({render:function(n){return n("div",{},[n("button",{on:{click:function(){t.$Modal.remove(),t.deleteComment(e)}}},"删除"),n("button",{on:{click:function(){t.$Modal.remove(),t.$Message.error("还得再等等...")}}},"申请评论置顶")])},onOk:function(){this.$Modal.remove()}})},showCommentInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=e,i=n.reply_user;e=(0,A.default)({},{onOk:function(e){t.commentFeed(e,i)}},e),this.$Modal.commentInpt(e)}},created:function(){this.initData(),this.getFeedLikes(),this.getComments()}}},O7VB:function(e,t,n){var i=n("jO6k");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("8ac92b26",i,!0,{})},ShHw:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feed-detail"},[n("head-top",{attrs:{"go-back":e.goBack,title:"动态详情"}}),e._v(" "),n("div",{staticClass:"ffd-body"},[n("div",{ref:"images",staticClass:"ffd-body-images"},e._l(e.imagesFormat,function(e){return n("img",{key:e.url,attrs:{src:e.url,width:e.width,height:e.height}})})),e._v(" "),n("div",{ref:"content",staticClass:"ffd-body-content",domProps:{innerHTML:e._s(e.body)}}),e._v(" "),n("div",{staticClass:"ffd-body-foot"},[n("div",{staticClass:"ffd-body-l"},[n("div",{staticClass:"ffd-like-list",class:{"ffd-like-list-none":0===e.likes_count}},e._l(e.likesList,function(e){var t=e.user;return n("div",{staticClass:"ffd-like-list-item"},[n("v-avatar",{key:t.id,attrs:{src:t.avatar,size:"small",sex:t.sex}})],1)})),e._v(" "),n("span",[e._v(e._s(e.likes_count)+"人点赞")])]),e._v(" "),n("div",{staticClass:"ffd-body-r"},[n("p",[e._v("发布于"+e._s(e._f("time2tips")(e.created_at)))]),e._v(" "),n("p",[e._v(e._s(e.views_count)+"人预览")])])])]),e._v(" "),n("div",{staticClass:"ffd-foot"},[n("div",{staticClass:"ffd-foot-head"},[e._v("\n      "+e._s(e.comments_count)+"条评论\n    ")]),e._v(" "),n("div",{staticClass:"gdf-comment-list"},e._l(e.pinneds,function(t){return n("div",{staticClass:"ffd-comment-item"},[n("router-link",{attrs:{to:"/user/"+t.user.id}},[n("v-avatar",{attrs:{src:t.user.avatar,sex:t.user.sex}})],1),e._v(" "),n("div",{staticClass:"ffd-comment-body"},[n("section",{staticClass:"ffd-comment-body-top"},[n("router-link",{attrs:{to:"/user/"+t.user.id,tag:"span"}},[e._v(e._s(t.user.name))]),e._v(" "),n("span",[e._v("置顶")]),e._v(" "),n("span",[e._v(e._s(e._f("time2tips")(t.created_at)))])],1),e._v(" "),t.reply_user?n("section",{staticClass:"ffd-comment-body-reply",on:{click:function(n){n.stopPropagation(),e.commentAction(t.user_id,t.user.name,t.id)}}},[e._v("\n            回复\n            "),n("span",{on:{click:function(n){n.preventDefault(),e.goToUserHome(t.reply.id)}}},[e._v(e._s(t.reply.name))]),e._v(">: \n            "),n("i",{on:{click:function(n){n.stopPropagation(),e.commentAction(t.user_id,t.user.name,t.id)}}},[e._v(e._s(t.body))])]):n("p",{on:{click:function(n){e.commentAction(t.user_id,t.user.name,t.id)}}},[e._v(e._s(t.body))])])],1)})),e._v(" "),n("div",{staticClass:"gdf-comment-list"},e._l(e.comments,function(t){return n("div",{staticClass:"ffd-comment-item"},[n("router-link",{attrs:{to:"/user/"+t.user.id}},[n("v-avatar",{attrs:{src:t.user.avatar,sex:t.user.sex}})],1),e._v(" "),n("div",{staticClass:"ffd-comment-body"},[n("section",{staticClass:"ffd-comment-body-usually"},[n("router-link",{attrs:{to:"/user/"+t.user.id,tag:"span"}},[e._v(e._s(t.user.name))]),e._v(" "),n("span",[e._v(e._s(e._f("time2tips")(t.created_at)))])],1),e._v(" "),t.reply_user?n("section",{staticClass:"ffd-comment-body-reply"},[e._v("\n            回复\n            "),n("span",{on:{click:function(n){n.preventDefault(),e.goToUserHome(t.reply.id)}}},[e._v(e._s(t.reply.name))]),e._v(": \n            "),n("i",{on:{click:function(n){n.stopPropagation(),e.commentAction(t.user_id,t.user.name,t.id)}}},[e._v(e._s(t.body))])]):n("p",{on:{click:function(n){e.commentAction(t.user_id,t.user.name,t.id)}}},[e._v(e._s(t.body))])])],1)}))]),e._v(" "),n("div",{staticClass:"ffd-action"},[n("div",{staticClass:"ffd-action-item",on:{click:e.likeFeed}},[n("v-icon",{attrs:{type:e.liked?"feed-like":"feed-unlike"}}),e._v(" "),n("p",[e._v("喜欢")])],1),e._v(" "),n("div",{staticClass:"ffd-action-item",on:{click:e.showCommentInput}},[n("v-icon",{attrs:{type:"feed-comment"}}),e._v(" "),n("p",[e._v("评论")])],1),e._v(" "),n("div",{staticClass:"ffd-action-item"},[n("v-icon",{attrs:{type:"base-share"}}),e._v(" "),n("p",[e._v("分享")])],1),e._v(" "),n("div",{staticClass:"ffd-action-item"},[n("v-icon",{attrs:{type:"feed-more"}}),e._v(" "),n("p",[e._v("更多")])],1)])],1)},o=[],s={render:i,staticRenderFns:o};t.a=s},UUtr:function(e,t,n){var i=n("5o08");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("2c61620d",i,!0,{})},XZbU:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GroupFeedItem=t.FeedItem=void 0;var o=n("woOf"),s=i(o),r=n("2Owi"),a=i(r),A=n("ns74"),d=i(A),c=n("AyBW"),f=i(c),l=n("EHbG"),m=i(l),u=n("5iQL"),p=i(u),C=n("ZoQJ");n("O7VB");var B=["feed","group"],h="\n    <div class='feed-item' @click='viewFeed'>\n        <span v-if='showFeedTime'>{{ time | time2txt }}</span>\n        <v-avatar v-else :sex='user.sex' \n            :src='user.avatar' \n            class='feed-item-avatar' \n            @click.native.stop='viewUser'>\n        </v-avatar>\n\n        <div class=\"feed-item-content\">\n            \x3c!-- 作者信息 --\x3e\n            <div class=\"feed-item-content-info\" v-if='!showFeedTime'>\n                <span @click.stop='viewUser'>{{ user.name }}</span>\n                <div>\n                    <i class=\"feed-item-content-info-pinned-icon\" v-if='isPinned'>置顶</i>\n                    <template>\n                        <span class=\"feed-item-content-info-time\">\n                            {{ time | time2tips }}\n                        </span>\n                    </template>\n                </div>\n            </div>\n            \x3c!-- 作者信息 END --\x3e\n\n            \x3c!-- 文本内容 --\x3e\n            <template v-if='title'>\n                <div class=\"feed-item-content-title\">{{ title }}</div>\n            </template>\n            <template v-if='text'>\n                <div class=\"feed-item-content-text\">\n                    <span>{{ text }}</span>\n                    <span v-if='isPay' class=\"blur\">{{ '魑魅魍魉魑魅魍魉魑魅' }}</span>\n                </div>\n            </template>\n            \x3c!-- 文本内容 END --\x3e\n\n            \x3c!-- 图片内容 --\x3e\n            <template v-if='images.length > 0'>\n                <feed-images \n                :pics='images'\n                :id='feed.id'\n                @viewPic='viewPic' \n                class='feed-item-content-imgs'\n                />\n            </template>\n            \x3c!-- 图片内容 END --\x3e\n\n        </div>\n        \x3c!-- 操作区 --\x3e\n\n        <div class=\"feed-item-foot\">\n            <feed-tools\n            :hasLike='hasLike' \n            :likeCount='likeCount' \n            :viewCount='viewCount' \n            :commentCount='commentCount' \n            @likeFeed='likeFeed' \n            @moreAction='moreAction' \n            @commentFeed='showCommentInput'\n            />\n        </div>\n        \n        \x3c!-- 操作区 END --\x3e\n\n        \x3c!-- 评论 --\x3e\n        <template v-if='commentCount'>\n            <div class=\"feed-item-comments\">\n                <feed-comment-item \n                v-for='comment in comments.slice(0,5)' \n                v-if='comment.id'\n                :comment='comment'\n                :key='comment.id'\n                @action='commentAction' />\n                <a v-if='commentCount >5' @click='viewFeed'>查看更多</a>\n            </div>\n        </template>\n        \x3c!-- 评论 END --\x3e\n\n    </div>\n",g={feed:{required:!0},channel:{validator:function(e){return(0,C.oneOf)(e,B)}},showFeedTime:{type:Boolean,default:!1},isPinned:{type:Boolean,default:!1},isPay:{type:Boolean,default:!1}},b={feedTools:f.default,feedImages:m.default,feedCommentItem:p.default},v={viewUser:function(){this.$router.push("/user/"+this.feed.user_id)},viewPic:function(){console.log("查看图片")},commentAction:function(e,t,n){if(e===this.$store.state.CURRENTUSER.id)this.showCommentAction(n);else{var i=t&&e?"回复"+t:"随便说说";this.showCommentInput({placeholder:i,reply_user:e})}},showCommentAction:function(e){var t=this;this.$Modal.info({render:function(n){var i=this;return n("div",{},[n("button",{on:{click:function(){t.deleteComment(e,i.onOk)}}},"删除"),n("button",{on:{click:function(){t.pinnedComment(e,i.onOk)}}},"申请评论置顶")])},onOk:function(){this.$Modal.remove()}})},showCommentInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=e,i=n.reply_user;e=(0,s.default)({},{onOk:function(e){t.commentFeed(e,i,function(){t.$Modal.remove()})}},e),this.$Modal.commentInpt(e)}},k={user:function(){return this.feed.user},time:function(){return this.feed.created_at.replace(/-/g,"/")},images:function(){return this.feed.images||[]},comments:function(){return this.feed.comments||[]},isOwner:function(){return this.user.id===this.$store.state.CURRENTUSER.id}};t.FeedItem={props:g,methods:v,computed:k,template:h,components:b,name:"FeedItem",mixins:[a.default]},t.GroupFeedItem={props:g,methods:v,computed:k,template:h,components:b,name:"GroupFeedItem",mixins:[d.default]}},Xd32:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("5PlU")},ZjKa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("woOf"),o=function(e){return e&&e.__esModule?e:{default:e}}(i),s=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r={validator:function(e){return"number"==typeof+e}};t.default={name:"feedTool",props:{hasLike:{type:Boolean,required:!0},likeCount:s({type:[Number,String],required:!0},r),viewCount:s({type:[Number,String],required:!0},r),commentCount:s({type:[Number,String],required:!0},r)},methods:{likeFeed:function(){this.$emit("likeFeed")},commentFeed:function(){this.$emit("commentFeed",this.com)},moreAction:function(){this.$emit("moreAction")}}}},cboG:function(e,t,n){"use strict";function i(e){n("pJeb")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("rojy"),s=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var a=n("BZ8j"),A=n("VU/8"),d=i,c=A(s.a,a.a,!1,d,null,null);t.default=c.exports},"fW/j":function(e,t,n){var i=n("g7kx");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("64811538",i,!0,{})},fxRn:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("g8Ux")},g7kx:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,'.m-pic{cursor:pointer;-webkit-background-size:cover;background-size:cover;background-repeat:no-repeat;background-position:50%;position:absolute;width:100%;height:100%}.m-pics{width:100%;overflow-y:hidden}.m-pics-list{text-align:left;margin-bottom:-.04rem;font-size:0;max-width:5.18rem;max-height:6.92rem}.m-pics-list li{width:33.33333333%;display:inline-block;vertical-align:top;padding:0 .04rem .04rem 0}.m-pics-box{display:inline-block;position:relative;padding-bottom:100%;width:100%;height:0;background-color:#f4f5f6}.m-pics-box.long .m-pic:after{display:block;position:absolute;bottom:.1rem;right:.05rem;content:"\\957F\\56FE";background-color:#c8a06c;text-shadow:0 .01rem .01rem rgba(0,0,0,.5);background-image:-webkit-linear-gradient(25deg,#e8d1b3,hsla(34,54%,81%,.6));background-image:-o-linear-gradient(25deg,#e8d1b3 0,hsla(34,54%,81%,.6) 100%);background-image:-webkit-linear-gradient(335deg,#e8d1b3 40%,hsla(34,54%,81%,.6) 50%);background-image:-o-linear-gradient(335deg,#e8d1b3 40%,hsla(34,54%,81%,.6) 50%);background-image:linear-gradient(115deg,#e8d1b3 40%,hsla(34,54%,81%,.6) 50%);text-align:center;width:.6rem;padding:.05rem;height:.3rem;line-height:.2rem;font-size:.2rem;color:#fff}.m-pics-box.long .m-pic{background-position:top;max-height:6.9rem}.m-pics-1{text-align:left}.m-pics-1 .m-pics-list{display:inline-block;overflow-y:hidden}.m-pics-1 li{width:100%}.m-pics-1 .long{width:-webkit-calc(var(--w) * .01rem);width:calc(var(--w) * .01rem);padding-bottom:-webkit-calc(var(--h)/var(--w) * 100%);padding-bottom:calc(var(--h) / var(--w) * 100%);max-width:100%}.m-pics-2 li,.m-pics-4 li{width:50%}.m-pics-5{position:relative}.m-pics-5 li:first-child,.m-pics-5 li:nth-child(2),.m-pics-7 li:first-child,.m-pics-7 li:nth-child(2),.m-pics-7 li:nth-child(6),.m-pics-7 li:nth-child(7),.m-pics-8 li:nth-child(4),.m-pics-8 li:nth-child(5){width:50%}',"",{version:3,sources:["/Users/SevenDu/Desktop/working/plus-component-h5/src/components/feed/components/feedImages.vue"],names:[],mappings:"AACA,OACE,eAAgB,AAChB,8BAA+B,AACvB,sBAAuB,AAC/B,4BAA6B,AAC7B,wBAAyB,AACzB,kBAAmB,AACnB,WAAY,AACZ,WAAa,CACd,AACD,QACE,WAAY,AACZ,iBAAmB,CACpB,AACD,aACE,gBAAiB,AACjB,sBAAwB,AACxB,YAAa,AACb,kBAAmB,AACnB,kBAAoB,CACrB,AACD,gBACE,mBAAoB,AACpB,qBAAsB,AACtB,mBAAoB,AACpB,yBAA6B,CAC9B,AACD,YACE,qBAAsB,AACtB,kBAAmB,AACnB,oBAAqB,AACrB,WAAY,AACZ,SAAU,AACV,wBAA0B,CAC3B,AACD,8BACE,cAAe,AACf,kBAAmB,AACnB,aAAe,AACf,aAAe,AACf,qBAAc,AACd,yBAA0B,AAC1B,2CAAkD,AAClD,4EAA4F,AAC5F,8EAAuF,AACvF,qFAA6F,AAC7F,gFAAwF,AACxF,6EAAqF,AACrF,kBAAmB,AACnB,YAAc,AACd,eAAiB,AACjB,aAAe,AACf,kBAAoB,AACpB,gBAAkB,AAClB,UAAY,CACb,AACD,wBACE,wBAAgC,AAChC,iBAAmB,CACpB,AACD,UACE,eAAiB,CAClB,AACD,uBACE,qBAAsB,AACtB,iBAAmB,CACpB,AACD,aACE,UAAY,CACb,AACD,gBACE,sCAAwC,AACxC,8BAAgC,AAChC,sDAAyD,AACzD,gDAAiD,AACjD,cAAgB,CACjB,AACD,0BAEE,SAAW,CACZ,AACD,UACE,iBAAmB,CACpB,AASD,8MAIE,SAAW,CACZ",file:"feedImages.vue",sourcesContent:["\n.m-pic {\n  cursor: pointer;\n  -webkit-background-size: cover;\n          background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50%;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.m-pics {\n  width: 100%;\n  overflow-y: hidden;\n}\n.m-pics-list {\n  text-align: left;\n  margin-bottom: -0.04rem;\n  font-size: 0;\n  max-width: 5.18rem;\n  max-height: 6.92rem;\n}\n.m-pics-list li {\n  width: 33.33333333%;\n  display: inline-block;\n  vertical-align: top;\n  padding: 0 0.04rem 0.04rem 0;\n}\n.m-pics-box {\n  display: inline-block;\n  position: relative;\n  padding-bottom: 100%;\n  width: 100%;\n  height: 0;\n  background-color: #f4f5f6;\n}\n.m-pics-box.long .m-pic:after {\n  display: block;\n  position: absolute;\n  bottom: 0.1rem;\n  right: 0.05rem;\n  content: '长图';\n  background-color: #c8a06c;\n  text-shadow: 0 0.01rem 0.01rem rgba(0, 0, 0, 0.5);\n  background-image: -webkit-linear-gradient(25deg, #e8d1b3 0%, rgba(232, 209, 179, 0.6) 100%);\n  background-image: -o-linear-gradient(25deg, #e8d1b3 0%, rgba(232, 209, 179, 0.6) 100%);\n  background-image: -webkit-linear-gradient(335deg, #e8d1b3 40%, rgba(232, 209, 179, 0.6) 50%);\n  background-image: -o-linear-gradient(335deg, #e8d1b3 40%, rgba(232, 209, 179, 0.6) 50%);\n  background-image: linear-gradient(115deg, #e8d1b3 40%, rgba(232, 209, 179, 0.6) 50%);\n  text-align: center;\n  width: 0.6rem;\n  padding: 0.05rem;\n  height: 0.3rem;\n  line-height: 0.2rem;\n  font-size: 0.2rem;\n  color: #fff;\n}\n.m-pics-box.long .m-pic {\n  background-position: top center;\n  max-height: 6.9rem;\n}\n.m-pics-1 {\n  text-align: left;\n}\n.m-pics-1 .m-pics-list {\n  display: inline-block;\n  overflow-y: hidden;\n}\n.m-pics-1 li {\n  width: 100%;\n}\n.m-pics-1 .long {\n  width: -webkit-calc(var(--w) * 0.01rem);\n  width: calc(var(--w) * 0.01rem);\n  padding-bottom: -webkit-calc(var(--h) / var(--w) * 100%);\n  padding-bottom: calc(var(--h) / var(--w) * 100%);\n  max-width: 100%;\n}\n.m-pics-2 li,\n.m-pics-4 li {\n  width: 50%;\n}\n.m-pics-5 {\n  position: relative;\n}\n.m-pics-5 li:nth-child(1),\n.m-pics-5 li:nth-child(2) {\n  width: 50%;\n}\n.m-pics-8 li:nth-child(4),\n.m-pics-8 li:nth-child(5) {\n  width: 50%;\n}\n.m-pics-7 li:nth-child(1),\n.m-pics-7 li:nth-child(2),\n.m-pics-7 li:nth-child(6),\n.m-pics-7 li:nth-child(7) {\n  width: 50%;\n}"],sourceRoot:""}])},g8Ux:function(e,t,n){var i=n("77Pl"),o=n("3fs2");e.exports=n("FeBl").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},gEq1:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,'.feed-comment-item{color:#999;font-size:.26rem;line-height:1.4;max-height:1.092rem;overflow-y:hidden}.feed-comment-item .user-name{padding:0 .05rem;color:#333}.feed-comment-item .user-name:last-of-type:after{content:":";padding-left:.05rem;color:#999}',"",{version:3,sources:["/Users/SevenDu/Desktop/working/plus-component-h5/src/components/feed/components/feedCommentItem.vue"],names:[],mappings:"AACA,mBACE,WAAY,AACZ,iBAAmB,AACnB,gBAAiB,AACjB,oBAAqB,AACrB,iBAAmB,CACpB,AACD,8BACE,iBAAmB,AACnB,UAAY,CACb,AACD,iDACE,YAAa,AACb,oBAAsB,AACtB,UAAY,CACb",file:"feedCommentItem.vue",sourcesContent:["\n.feed-comment-item {\n  color: #999;\n  font-size: 0.26rem;\n  line-height: 1.4;\n  max-height: 1.092rem;\n  overflow-y: hidden;\n}\n.feed-comment-item .user-name {\n  padding: 0 0.05rem;\n  color: #333;\n}\n.feed-comment-item .user-name:last-of-type:after {\n  content: ':';\n  padding-left: 0.05rem;\n  color: #999;\n}"],sourceRoot:""}])},iEwy:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feed-tool"},[n("div",{staticClass:"feed-tool-item",class:{hasLike:e.hasLike},on:{click:function(t){t.stopPropagation(),e.likeFeed(t)}}},[n("v-icon",{staticClass:"feed-tool-icon",attrs:{type:e.hasLike?"feed-like":"feed-unlike"}}),e._v(" "),n("span",[e._v(e._s(e.likeCount))])],1),e._v(" "),n("div",{staticClass:"feed-tool-item",on:{click:function(t){t.stopPropagation(),e.commentFeed(t)}}},[n("v-icon",{staticClass:"feed-tool-icon",attrs:{type:"feed-comment"}}),e._v(" "),n("span",[e._v(e._s(e.commentCount))])],1),e._v(" "),n("div",{staticClass:"feed-tool-item"},[n("v-icon",{staticClass:"feed-tool-icon",attrs:{type:"feed-eye"}}),e._v(" "),n("span",[e._v(e._s(e.viewCount))])],1),e._v(" "),n("div",{staticClass:"feed-tool-item",on:{click:function(t){t.stopPropagation(),e.moreAction(t)}}},[n("v-icon",{staticClass:"feed-tool-icon",attrs:{type:"feed-more"}})],1)])},o=[],s={render:i,staticRenderFns:o};t.a=s},jO6k:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,".feed-item{background:#fff;padding:.3rem .2rem;font-size:.3rem;overflow:hidden}.feed-item+.feed-item{margin-top:.1rem}.feed-item-avatar{float:left}.feed-item-content{margin-left:.96rem}.feed-item-content>:first-child{margin-top:0}.feed-item-content-title{line-height:1;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:600;margin-top:.25rem;font-size:.32rem;color:#333}.feed-item-content-info{display:flex;justify-content:space-between;font-size:.26rem;color:#333}.feed-item-content-info-time{margin-left:.1rem;font-size:.24rem;color:#ccc}.feed-item-content-info-pinned-icon{display:inline-table;font-size:.22rem;color:#4bb893;width:.62rem;height:.3rem;text-align:center;border:1px solid currentColor}.feed-item-content-text{width:100%;font-size:.3rem;line-height:1.4;overflow:hidden;margin-top:.15rem}.feed-item-content-text .blur{color:transparent;text-shadow:0 0 .1rem #999}.feed-item-content-imgs{margin-top:.25rem}.feed-item-foot{margin:.2rem -.2rem 0;padding:0 .2rem 0 1.16rem;height:.9rem;border-top:1px solid #ededed}.feed-item-foot:last-child{margin-bottom:-.3rem}.feed-item-comments{padding:0 0 0 .96rem}.feed-item-time{max-width:.96rem;float:left}","",{version:3,sources:["/Users/SevenDu/Desktop/working/plus-component-h5/src/components/feed/feedItem.less"],names:[],mappings:"AAAA,WACE,gBAAiB,AACjB,oBAAuB,AACvB,gBAAkB,AAClB,eAAiB,CAClB,AAED,sBACE,gBAAmB,CACpB,AAED,kBACE,UAAY,CACb,AAED,mBACE,kBAAqB,CACtB,AAED,gCACE,YAAc,CACf,AAED,yBACE,cAAe,AACf,WAAY,AACZ,gBAAiB,AACjB,mBAAoB,AACpB,uBAAwB,AACxB,gBAAiB,AACjB,kBAAoB,AACpB,iBAAmB,AACnB,UAAY,CACb,AAED,wBACE,aAAc,AACd,8BAA+B,AAC/B,iBAAmB,AACnB,UAAY,CACb,AAED,6BACE,kBAAoB,AACpB,iBAAmB,AACnB,UAAY,CACb,AAED,oCACE,qBAAsB,AACtB,iBAAmB,AACnB,cAAe,AACf,aAAe,AACf,aAAe,AACf,kBAAmB,AACnB,6BAA+B,CAChC,AAED,wBACE,WAAY,AACZ,gBAAkB,AAClB,gBAAiB,AACjB,gBAAiB,AACjB,iBAAoB,CACrB,AAED,8BACE,kBAAmB,AACnB,0BAA6B,CAC9B,AAED,wBACE,iBAAoB,CACrB,AAED,gBACE,sBAAyB,AACzB,0BAA4B,AAC5B,aAAe,AACf,4BAA8B,CAC/B,AAED,2BACE,oBAAuB,CACxB,AAED,oBACE,oBAAuB,CACxB,AAED,gBACE,iBAAmB,AACnB,UAAY,CACb",file:"feedItem.less",sourcesContent:[".feed-item {\n  background: #fff;\n  padding: 0.3rem 0.2rem;\n  font-size: 0.3rem;\n  overflow: hidden;\n}\n\n.feed-item + .feed-item {\n  margin-top: 0.1rem;\n}\n\n.feed-item-avatar {\n  float: left;\n}\n\n.feed-item-content {\n  margin-left: 0.96rem;\n}\n\n.feed-item-content > :first-child {\n  margin-top: 0;\n}\n\n.feed-item-content-title {\n  line-height: 1;\n  width: 100%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-weight: 600;\n  margin-top: 0.25rem;\n  font-size: 0.32rem;\n  color: #333;\n}\n\n.feed-item-content-info {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.26rem;\n  color: #333;\n}\n\n.feed-item-content-info-time {\n  margin-left: 0.1rem;\n  font-size: 0.24rem;\n  color: #ccc;\n}\n\n.feed-item-content-info-pinned-icon {\n  display: inline-table;\n  font-size: 0.22rem;\n  color: #4bb893;\n  width: 0.62rem;\n  height: 0.3rem;\n  text-align: center;\n  border: 1px solid currentColor;\n}\n\n.feed-item-content-text {\n  width: 100%;\n  font-size: 0.3rem;\n  line-height: 1.4;\n  overflow: hidden;\n  margin-top: 0.15rem;\n}\n\n.feed-item-content-text .blur {\n  color: transparent;\n  text-shadow: 0 0 0.1rem #999;\n}\n\n.feed-item-content-imgs {\n  margin-top: 0.25rem;\n}\n\n.feed-item-foot {\n  margin: 0.2rem -0.2rem 0;\n  padding: 0 0.2rem 0 1.16rem;\n  height: 0.9rem;\n  border-top: 1px solid #ededed;\n}\n\n.feed-item-foot:last-child {\n  margin-bottom: -0.3rem;\n}\n\n.feed-item-comments {\n  padding: 0 0 0 0.96rem;\n}\n\n.feed-item-time {\n  max-width: 0.96rem;\n  float: left;\n}"],sourceRoot:""}])},ns74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={computed:{text:function(){return this.feed.summary},title:function(){return this.feed.title},hasLike:function(){return this.feed.liked},likeCount:function(){return this.feed.likes_count},viewCount:function(){return this.feed.views_count},commentCount:function(){return this.feed.comments_count}},methods:{viewFeed:function(){this.$router.push("/group/"+this.feed.group_id+"/feed/"+this.feed.id)},formatData:function(){console.log("format data")},likeFeed:function(){var e=this,t=this.hasLike?"delete":"post",n=this.hasLike?this.feed.likes_count-1:this.feed.likes_count+1;this.$http({method:t,url:"/plus-group/group-posts/"+this.feed.id+"/likes"}).then(function(t){t.data;e.feed.liked=!e.feed.liked,e.feed.likes_count=n}).catch(function(e){console.log(e)})},moreAction:function(){console.log("更多操作")},commentFeed:function(e,t,n){var i=this;this.$http.post("/plus-group/group-posts/"+this.feed.id+"/comments",{body:e,reply_user:t}).then(function(e){var t=e.data;t=void 0===t?{}:t;var o=(t.message,t.comment);i.feed.comments.unshift(o),i.feed.comments_count+=1,n&&n()}).catch(function(e){var t=e.response;t=void 0===t?{}:t;var o=t.data,s=void 0===o?{message:"评论失败"}:o;i.$Message.error(s),n&&n()})},deleteComment:function(e,t){console.log("删除评论:",e)},pinnedComment:function(e){console.log("申请评论置顶:",e)}}}},pJeb:function(e,t,n){var i=n("24d9");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("ac00b748",i,!0,{})},rojy:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}function s(e){return function(){var t=e.apply(this,arguments);return new d.default(function(e,n){function i(o,s){try{var r=t[o](s),a=r.value}catch(e){return void n(e)}if(!r.done)return d.default.resolve(a).then(function(e){i("next",e)},function(e){i("throw",e)});e(a)}return i("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("c/Tr"),a=i(r),A=n("//Fk"),d=i(A),c=n("Xxa5"),f=i(c),l=n("XZbU"),m=n("ZoQJ"),u=n("BW2B"),p=i(u),C=n("WCcI"),B=i(C),h=["new","hot","follow"];t.default={name:"feedIndex",components:{HeadTop:p.default,FeedItem:l.FeedItem,FootGuide:B.default},data:function(){return{feed_type:this.$route.params.type,ad:[],feeds:[],pinned:[],maxId:0}},watch:{$route:function(e){var t=e.params.type;(0,m.oneOf)(t,h)&&t!==this.feed_type&&(this.ad=[],this.feeds=[],this.pinned=[],this.feed_type=t,this.$nextTick(this.$refs.loadmore.beforeRefresh))}},methods:{onRefresh:function(){var e=this;return s(f.default.mark(function t(){var n,i,s,r,a;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/feeds",{params:{type:e.feed_type,limit:15}});case 2:n=t.sent,i=n.data,i=void 0===i?{}:i,s=i.ad,r=i.feeds,a=i.pinned,e.ad=s?[].concat(o(s)):[],e.feeds=r?[].concat(o(r)):[],e.pinned=a?[].concat(o(a)):[],e.maxId=r.length?r[r.length-1].id:0,e.$refs.loadmore.topEnd(!(r.length<15));case 11:case"end":return t.stop()}},t,e)}))()},onLoadMore:function(){var e=this;return s(f.default.mark(function t(){var n,i,s,r,a,A;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={type:e.feed_type,limit:15,after:e.maxId},t.next=3,e.$http.get("/feeds",{params:n});case 3:i=t.sent,s=i.data,s=void 0===s?{}:s,r=s.ad,a=s.feeds,A=s.pinned,e.ad=r?[].concat(o(e.ad),o(r)):e.ad,e.feeds=a?[].concat(o(e.feeds),o(a)):e.feeds,e.pinned=A?[].concat(o(e.pinned),o(A)):e.pinned,e.maxId=a.length?a[a.length-1].id:e.maxId,e.$refs.loadmore.bottomEnd(a.length<15);case 12:case"end":return t.stop()}},t,e)}))()}},beforeRouteEnter:function(e,t,n){var i=(e.path,e.params.type);h.indexOf(i)>-1?n():n({path:"/feed/new"})},beforeDestroy:function(){this.$store.commit("SAVE_FEED_TYPE","")}}},sksa:function(e,t,n){var i=n("JxHX");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("4c4cc849",i,!0,{})},"us/S":function(e,t,n){e.exports={default:n("Xd32"),__esModule:!0}}});
//# sourceMappingURL=feed.12e60216aa9e870d1e43.js.map