webpackJsonp([10],{"860e":function(t,e,n){"use strict";var a=n("fKPv"),s=n.n(a),i=(n("EuXz"),n("mfU/")),o=n("BM2P"),r="module-question-list-answer-card",u={name:r,components:s()({},i["a"].name,i["a"]),props:{answer:{required:!0,validator:function(t){return!t||t instanceof Object}}},computed:{anonymity:function(){var t=this.answer.anonymity;return!!t},user:function(){var t=this.answer.user;return t||{}},showUsername:function(){return this.anonymity?"匿名用户":this.user.name},body:function(){var t=this.answer.body;return Object(o["syntaxTextAndImage"])(t||"").text}}},l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.answer?n("div",{staticClass:"module-question-list-answer-card"},[n("module-user-avatar",{attrs:{anonymity:t.anonymity,src:t.user.avatar,sex:t.user.sex}}),t._v("\n  "+t._s(t.showUsername)+"："+t._s(t.body)+"\n")],1):n("div",{staticClass:"module-question-list-answer-card-empty"})},c=[],d=n("XyMi");function m(t){n("fAxL")}var v,f=!1,p=m,h=null,q=null,_=Object(d["a"])(u,l,c,f,p,h,q),y=_.exports,b={name:"module-question-list-item",components:(v={},s()(v,i["a"].name,i["a"]),s()(v,y.name,y),v),props:{question:{type:Object,required:!0}},computed:{answer:function(){var t=this.question.answer;return t},body:function(){return Object(o["syntaxTextAndImage"])(this.question.body)},firstImageStyle:function(){var t=this.body.images,e=t.pop();return!!e&&"background-image: url(".concat(e,")")}}},g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"module-question-list-item"},[n("router-link",{staticClass:"module-question-list-item_title",attrs:{tag:"h3",to:"/questions/"+t.question.id}},[t._v("\n    "+t._s(t.question.subject)+"\n    "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.question.excellent,expression:"question.excellent"}],staticClass:"module-question-list-item-shang-i"},[t._v("精")])]),t.firstImageStyle?n("router-link",{staticClass:"module-question-list-item_image",style:t.firstImageStyle,attrs:{tag:"div",to:"/questions/"+t.question.id}}):t._e(),n("module-question-list-answer-card",{attrs:{answer:t.answer}}),n("router-link",{staticClass:"module-question-list-item_button",attrs:{to:"/questions/"+t.question.id,tag:"div"}},[n("span",[n("span",{staticClass:"module-question-list-item_button-style1"},[t._v(t._s(t.question.watchers_count))]),t._v(" 关注\n    ")]),n("span",[n("span",[t._v("·")]),n("span",{staticClass:"module-question-list-item_button-style1"},[t._v(t._s(t.question.answers_count))]),t._v(" 回答\n    ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.question.amount,expression:"question.amount"}]},[n("span",[t._v("·")]),n("span",{staticClass:"module-question-list-item-shang"},[n("span",[t._v("赏")]),t._v("\n        "+t._s(t.question.amount)+"\n      ")])]),n("span",{staticClass:"module-question-list-item_button-time"},[t._v(t._s(t._f("time2tips")(t.question.updated_at)))])])],1)},w=[];function x(t){n("KJpw")}var C=!1,N=x,k=null,M=null,j=Object(d["a"])(b,g,w,C,N,k,M);e["a"]=j.exports},KJpw:function(t,e){},OwrH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s=n("rzQm"),i=n.n(s),o=n("fKPv"),r=n.n(o),u=(n("EuXz"),n("uNya")),l=n("AoKB"),c=n.n(l),d=n("860e"),m={name:"icon-loading"},v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",t._b({attrs:{fill:"#59b6d7",width:"120",height:"30",viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"}},"svg",t.$props,!1),[n("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[n("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),n("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),n("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"}},[n("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),n("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),n("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[n("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),n("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])},f=[],p=n("XyMi"),h=!1,q=null,_=null,y=null,b=Object(p["a"])(m,v,f,h,q,_,y),g=b.exports,w={name:"module-questions",components:(a={},r()(a,d["a"].name,d["a"]),r()(a,g.name,g),a),data:function(){return{questions:[],loading:!1,loadmore:!1}},computed:{type:function(){var t=this.$route.query.type,e=void 0===t?"hot":t;return e}},methods:{navRouterLinkBuilder:function(t){return{path:"/question",query:{type:t}}},fetchQuestions:function(){var t=this;this.loading=!0,this.questions=[],Object(u["a"])(this.type).then(function(e){var n=e.data;t.questions=n,t.loading=!1}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var a=n.data;t.loading=!1,t.$Message.error(c()(a,"加载失败，请刷新重试！"))})},fetchQuestionsMore:function(){var t=this;this.loadmore=!0,Object(u["a"])(this.type,this.questions.length+1).then(function(e){var n=e.data;t.loadmore=!1,n.length?t.questions=i()(t.questions).concat(i()(n)):t.$Message.error("没有更多数据了")}).catch(function(e){var n=e.response;n=void 0===n?{}:n;var a=n.data;t.loadmore=!1,t.$Message.error(c()(a,"加载失败，请刷新重试！"))})},classNamebuilder:function(t){return"module-questions-".concat(t)}},watch:{$route:function(t,e){t.path===e.path&&t.query.type!==e.query.type&&this.fetchQuestions()}},mounted:function(){this.fetchQuestions()}},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"module-questions"},[n("nav",{staticClass:"module-questions-nav"},[n("router-link",{attrs:{to:"/question",replace:"",exact:"","exact-active-class":"active"}},[t._v("热门")]),n("router-link",{attrs:{to:t.navRouterLinkBuilder("excellent"),replace:"",exact:"","exact-active-class":"active"}},[t._v("精选")]),n("router-link",{attrs:{to:t.navRouterLinkBuilder("reward"),replace:"",exact:"","exact-active-class":"active"}},[t._v("悬赏")]),n("router-link",{attrs:{to:t.navRouterLinkBuilder("new"),replace:"",exact:"","exact-active-class":"active"}},[t._v("最新")]),n("router-link",{attrs:{to:t.navRouterLinkBuilder("all"),replace:"",exact:"","exact-active-class":"active"}},[t._v("全部")])],1),n("main",{staticClass:"module-questions-main"},[t.loading?n("div",{class:t.classNamebuilder("main-loading")},[n("icon-loading",{class:t.classNamebuilder("main-loading_icon")})],1):t._e(),t._l(t.questions,function(t){return n("module-question-list-item",{key:t.id,attrs:{question:t}})}),t.questions.length&&!t.loadmore?n("div",{class:t.classNamebuilder("main-loadmore")},[n("button",{class:t.classNamebuilder("main-loadmore_button"),on:{click:t.fetchQuestionsMore}},[t._v("\n        加载更多\n      ")])]):t.loadmore?n("div",{class:[t.classNamebuilder("main-loadmore")]},[n("button",{class:[t.classNamebuilder("main-loadmore_button"),"active"]},[n("icon-loading",{class:t.classNamebuilder("main-loading_icon")})],1)]):t._e()],2)])},C=[];function N(t){n("R2Ud")}var k=!1,M=N,j=null,O=null,$=Object(p["a"])(w,x,C,k,M,j,O);e["default"]=$.exports},R2Ud:function(t,e){},fAxL:function(t,e){},uNya:function(t,e,n){"use strict";e["a"]=i,e["b"]=o,e["d"]=r,e["c"]=u;var a=n("0zyd");function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].get("/questions",{params:t,validateStatus:function(t){return 200===t}})}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;return s({type:t,limit:n,offset:e})}function o(t){return a["a"].get("/questions/".concat(t),{validateStatus:function(t){return 200===t}})}function r(t){return a["a"].put("/user/question-watches/".concat(t),{},{validateStatus:function(t){return 204===t}})}function u(t){return a["a"].delete("/user/question-watches/".concat(t),{validateStatus:function(t){return 204===t}})}}});
//# sourceMappingURL=10.0453ad4a.js.map